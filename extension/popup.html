<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      width: 300px;
      background: #ffffff;
      color: #1a1a2e;
    }

    /* ── Header ── */
    .header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 14px 16px 12px;
      border-bottom: 1px solid #f0f0f0;
    }

    .logo {
      width: 22px; height: 22px;
      background: #4a90e2;
      border-radius: 6px;
      display: flex; align-items: center; justify-content: center;
      color: white; font-size: 12px; font-weight: 700;
    }

    .header h1 {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    /* ── Screens ── */
    .screen { display: none; padding: 16px; }
    .screen.active { display: block; }

    /* ── Idle screen ── */
    #screen-idle p {
      font-size: 13px;
      color: #888;
      text-align: center;
      padding: 12px 0 4px;
      line-height: 1.5;
    }

    /* ── Detected screen ── */
    .label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #aaa;
      margin-bottom: 4px;
    }

    .field-row {
      background: #f7f8fa;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 8px;
    }

    .field-val {
      font-size: 13px;
      font-weight: 500;
      color: #222;
      word-break: break-all;
    }

    .field-val.password {
      letter-spacing: 0.15em;
      font-family: monospace;
    }

    /* ── Pwned warning ── */
    #pwned-warning {
      display: none;
      background: #fff3f3;
      border: 1px solid #f5c6c6;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 10px;
      font-size: 12px;
      color: #c0392b;
      line-height: 1.4;
    }

    #pwned-warning strong { display: block; margin-bottom: 2px; }

    /* ── Buttons ── */
    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
    }

    button {
      flex: 1;
      border: none;
      border-radius: 8px;
      padding: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.15s;
    }

    button:hover { opacity: 0.85; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }

    #saveBtn { background: #4a90e2; color: white; }
    #dismissBtn { background: #f0f0f0; color: #555; }

    /* ── Loading spinner ── */
    .spinner {
      display: inline-block;
      width: 12px; height: 12px;
      border: 2px solid rgba(255,255,255,0.4);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      margin-right: 6px;
      vertical-align: middle;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ── Success screen ── */
    #screen-success { text-align: center; padding: 24px 16px; }
    .check-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }
    #screen-success h2 { font-size: 15px; font-weight: 600; margin-bottom: 6px; }
    #screen-success p { font-size: 12px; color: #888; }

    /* ── Error ── */
    #error-msg {
      display: none;
      font-size: 12px;
      color: #c0392b;
      margin-top: 8px;
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="header">
    <div class="logo">B</div>
    <h1>BitGuard</h1>
  </div>

  <!-- Idle: no login detected -->
  <div class="screen active" id="screen-idle">
  <p>No login detected yet.<br>Submit a login form to get started.</p>

  <!-- Botón para generar contraseña -->
  <div class="btn-row">
    <button id="generatePassBtn">Generate password</button>
  </div>

  <!-- Mostrar contraseña generada y botón para copiar -->
  <div style="margin-top: 8px; display: flex; align-items: center; gap: 6px;">
    <p id="generated-pass" class="field-val password" style="flex: 1; cursor: pointer;" title="Click to copy"></p>
  </div>
</div>






  <!-- Login detected -->
  <div class="screen" id="screen-detected">
    <div class="field-row">
      <div class="label">Website</div>
      <div class="field-val" id="disp-url">—</div>
    </div>
    <div class="field-row">
      <div class="label">Username</div>
      <div class="field-val" id="disp-user">—</div>
    </div>
    <div class="field-row">
      <div class="label">Password</div>
      <div class="field-val password" id="disp-pass">••••••••</div>
    </div>

    <div id="pwned-warning">
      <strong>⚠ Password compromised</strong>
      This password has appeared in <span id="pwned-count">?</span> data breaches. We recommend changing it.
    </div>

    <div class="btn-row">
      <button id="dismissBtn">Dismiss</button>
      <button id="saveBtn">Save to vault</button>
    </div>
    <div id="error-msg"></div>
  </div>

  <!-- Success -->
  <div class="screen" id="screen-success">
    <div class="check-icon">✅</div>
    <h2>Saved to vault</h2>
    <p>Your credentials are securely stored.</p>
  </div>

  <script src="popup.js"></script>
</body>
</html>
